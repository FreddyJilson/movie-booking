@page "/"
@using ui.Components

@inject NavigationManager _navigationManager
@inject IHttpClientFactory _client;
@inject IDialogService DialogService

<MudContainer Class="mt-16" MaxWidth="MaxWidth.Medium">
    <MudText Typo="Typo.h3" Align="Align.Center" GutterBottom="true"></MudText>
    <MudGrid Spacing="6" Class="mt-16">
        <MudItem xs="12">
            <MudText Typo="Typo.h4" Class="d-flex justify-center" GutterBottom="true">Welcome to Linklo!</MudText>
            <MudText Typo="Typo.h5" Class="d-flex justify-center" GutterBottom="true">Linklo is a shareable url link shorten service.</MudText>
            <MudGrid>
                <MudItem xs="12">
                    <MudTextField @bind-Value="UrlLink" Label="Enter URL link to shorten" Variant="Variant.Outlined"/>
                </MudItem>
                <MudItem xs="12" Class="d-flex justify-center">
                    @if (!InProgress) {
                        <MudButton Style="width: 200px; margin: 2px;" OnClick="UrlShorten" Variant="Variant.Filled" DisableElevation="true" Color="Color.Primary" Size="Size.Large" Class="mt-8">Shorten</MudButton>
                    }
                    else {
                        <MudProgressCircular Size="Size.Large" Color="Color.Primary" Indeterminate="true"/>
                    }
                </MudItem>
            </MudGrid>

        </MudItem>
    </MudGrid>
</MudContainer>

@code {
    private string UrlLink { get; set; }
    private bool InProgress { get; set; } = false;
    DialogOptions maxWidth = new DialogOptions() {MaxWidth = MaxWidth.Medium, FullWidth = true};

    public async void UrlShorten() {
        DialogService.Show<UrlShortenedDialog>("Shortened URL link", maxWidth);
    }
    
}
